<section data-section-id="{{ section.id }}" class="section product-slider">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="block-heading">
          <h1 class="block-heading--title">
            {{ section.settings.header | escape }}
          </h1>
        </div>
      </div>
    </div>
    <div class="row">
      <div id="specialsCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          {%- comment -%}
            Loop through each product and display them accordingly.
          {%- endcomment -%}
          {%- assign i = 0 -%}
          {% for product in collections.specials.products %}

          {%- assign current_variant = product.selected_or_first_available_variant -%}

          {% if product == empty %}
            {%- assign section_onboarding = true -%}
          {% endif %}

          {% capture product_image %} {{ product | img_url }} {% endcapture %}
          {%- assign i = i | plus: 1 -%}

          {% if i == 1 %}
            <div class="carousel-item  active">
          {% else %}
            <div class="carousel-item">
          {% endif %}
            <div class="product">
              <a class="product-image--link" href="{{ product.url }}" role="link">
                <img
                  class="product-image--link"
                  src="{{ product_image }}"
                  alt="{{ product.title }}">
              </a>
              <h3 class="product-title"> {{ product.title }} </h3>
              <span class="product-title--sub"> ( {{ current_variant.sku }} ) </span>
              <p class="product-description">
                {{ product.description }}
              </p>
              <form
                class="add-to-cart--form"
                data-productid="{{product.id}}"
                action="/cart/add"
                method="post">
                  <div class="input-wrapper">
                    <input type="hidden" name="quantity" id="quantity" value="1">
                    <input
                      type="hidden"
                      name="id"
                      data-productid="{{product.id}}"
                      class="product-select"
                      value="{{ product.variants[0].id }}"
                      data-variant-title="{{ product.variants[0].title }}">
                  </div>
                  <button
                    type="submit"
                    name="add"
                    data-add-to-cart
                    {% unless product.available %}disabled="disabled"{% endunless %}
                    {% if section_onboarding %}disabled="disabled"{% endif %}>
                      <span data-add-to-cart-text>
                        {% if product.available %}
                          {{ 'products.product.add_to_cart' | t }}
                        {% else %}
                          {{ 'products.product.sold_out' | t }}
                        {% endif %}
                      </span>
                  </button>
              </form>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>
{% schema %}
  {
    "name": "Product Slider",
    "settings": [
      {
        "type": "text",
        "id": "header",
        "label": "Section Heading",
        "default": "Example Section Heading"
      }
    ],
    "presets": [
      {
        "name": "Product Slider",
        "category": "Product"
      }
    ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}

{% endjavascript %}
