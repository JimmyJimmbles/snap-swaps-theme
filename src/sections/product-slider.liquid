<section data-section-id="{{ section.id }}" class="section product-slider">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="block-heading">
          <h1 class="block-heading--title">
            {{ section.settings.header | escape }}
          </h1>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="pill-container">
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
          <li class="nav-item">
            <a
              class="nav-link pill active"
              id="pills-popular-tab"
              data-toggle="pill"
              data-slide="popularCarousel"
              href="#pills-popular"
              aria-controls="pills-popular"
              aria-selected="true">
                Popular
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link pill"
              id="pills-new-tab"
              data-toggle="pill"
              data-slide="newCarousel"
              href="#pills-new"
              aria-controls="pills-new"
              aria-selected="false">
                New Arrivals
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link pill"
              id="pills-special-tab"
              data-toggle="pill"
              data-slide="specialCarousel"
              href="#pills-special"
              aria-controls="pills-special"
              aria-selected="false">
                Specials
            </a>
          </li>
        </ul>
      </div>
      <div class="tab-content">
        <div class="tab-pane fade show active" id="pills-popular" role="tabpanel" aria-labelledby="pills-popular-tab">
          <div id="popularCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                {% for product in collections.popular.products %}
                  {%- assign current_variant = product.selected_or_first_available_variant -%}
                  {% if product == empty %}
                    {%- assign section_onboarding = true -%}
                  {% endif %}
                  {% capture product_image %} {{ product | img_url: '500x500' }} {% endcapture %}
                  {%- assign mod = forloop.index | modulo: 3 -%}
                  {% if mod == 1 %}
                    {%- unless forloop.first -%}
                    <div class="carousel-item">
                    {%- endunless -%}
                  {% endif %}
                    <div class="col-12 col-sm-4 product-col">
                      <div class="product-item">
                          <a
                            class="product-image--link"
                            title="View Product {{ product.title }}"
                            href="{{ product.url | within: collection }}"
                            role="link">
                            {% if product.featured_image != blank %}
                              <img
                                class="product-image--img img-responsive"
                                src="{{ product_image }}"
                                alt="{{ product.title }}">
                            {% endif %}
                              <div class="colletion-details">
                                <div class="collection-details--name">
                                  <span class="collection--title">{{ product.title }}</span>
                                  <span class="sku text-muted">{{ current_variant.sku }}</span>
                                </div>
                              </div>
                          </a>
                      </div>
                    </div>
                  {% if mod == 0 %}
                    {%- unless forloop.last -%}
                    </div>
                    {%- endunless -%}
                  {% endif %}
                {% endfor %}
              </div>
            </div>
            <a class="control prev" href="#popularCarousel" role="button" data-slide="prev">
              <i class="fas fa-arrow-left"></i>
              <span class="sr-only">Previous</span>
            </a>
            <a class="control next" href="#popularCarousel" role="button" data-slide="next">
              <i class="fas fa-arrow-right"></i>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
        <div class="tab-pane fade" id="pills-new" role="tabpanel" aria-labelledby="pills-new-tab">
          <div id="newCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                {% for product in collections.new-arrivals.products %}
                  {%- assign current_variant = product.selected_or_first_available_variant -%}
                  {% if product == empty %}
                    {%- assign section_onboarding = true -%}
                  {% endif %}
                  {% capture product_image %} {{ product | img_url: '500x500' }} {% endcapture %}
                  {%- assign mod = forloop.index | modulo: 3 -%}
                  {% if mod == 1 %}
                    {%- unless forloop.first -%}
                    <div class="carousel-item">
                    {%- endunless -%}
                  {% endif %}
                    <div class="col-12 col-sm-4 product-col">
                      <div class="product-item">
                          <a
                            class="product-image--link"
                            title="View Product {{ product.title }}"
                            href="{{ product.url | within: collection }}"
                            role="link">
                            {% if product.featured_image != blank %}
                              <img
                                class="product-image--img img-responsive"
                                src="{{ product_image }}"
                                alt="{{ product.title }}">
                            {% endif %}
                              <div class="colletion-details">
                                <div class="collection-details--name">
                                  <span class="collection--title">{{ product.title }}</span>
                                  <span class="sku text-muted">{{ current_variant.sku }}</span>
                                </div>
                              </div>
                          </a>
                      </div>
                  </div>
                  {% if mod == 0 %}
                    {%- unless forloop.last -%}
                    </div>
                    {%- endunless -%}
                  {% endif %}
                {% endfor %}
              </div>
            </div>
            <a class="control prev" href="#newCarousel" role="button" data-slide="prev">
              <i class="fas fa-arrow-left"></i>
              <span class="sr-only">Previous</span>
            </a>
            <a class="control next" href="#newCarousel" role="button" data-slide="next">
              <i class="fas fa-arrow-right"></i>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
        <div class="tab-pane fade" id="pills-special" role="tabpanel" aria-labelledby="pills-special-tab">
          <div id="specialCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                {% for product in collections.specials.products %}
                  {%- assign current_variant = product.selected_or_first_available_variant -%}
                  {% if product == empty %}
                    {%- assign section_onboarding = true -%}
                  {% endif %}
                  {% capture product_image %} {{ product | img_url: '500x500' }} {% endcapture %}
                  {%- assign mod = forloop.index | modulo: 3 -%}
                  {% if mod == 1 %}
                    {%- unless forloop.first -%}
                    <div class="carousel-item">
                    {%- endunless -%}
                  {% endif %}
                    <div class="col-12 col-sm-4 product-col">
                      <div class="product-item">
                          <a
                            class="product-image--link"
                            title="View Product {{ product.title }}"
                            href="{{ product.url | within: collection }}"
                            role="link">
                            {% if product.featured_image != blank %}
                              <img
                                class="product-image--img img-responsive"
                                src="{{ product_image }}"
                                alt="{{ product.title }}">
                            {% endif %}
                              <div class="colletion-details">
                                <div class="collection-details--name">
                                  <span class="collection--title">{{ product.title }}</span>
                                  <span class="sku text-muted">{{ current_variant.sku }}</span>
                                </div>
                              </div>
                          </a>
                      </div>
                  </div>
                  {% if mod == 0 %}
                    {%- unless forloop.last -%}
                    </div>
                    {%- endunless -%}
                  {% endif %}
                {% endfor %}
              </div>
            </div>
            <a class="control prev" href="#specialCarousel" role="button" data-slide="prev">
              <i class="fas fa-arrow-left"></i>
              <span class="sr-only">Previous</span>
            </a>
            <a class="control next" href="#specialCarousel" role="button" data-slide="next">
              <i class="fas fa-arrow-right"></i>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% schema %}
  {
    "name": "Product Slider",
    "settings": [
      {
        "type": "text",
        "id": "header",
        "label": "Section Heading",
        "default": "Example Section Heading"
      }
    ],
    "presets": [
      {
        "name": "Product Slider",
        "category": "Product"
      }
    ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}

{% endjavascript %}
